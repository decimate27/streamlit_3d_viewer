# 🔐 보안 설정 가이드

## ✅ 구현된 보안 기능

### 1. 비밀번호 인증 시스템
- **기본 비밀번호**: `palbong211!` ⚠️ **반드시 변경하세요!**
- **환경변수 설정**: `ADMIN_PASSWORD`
- **비밀번호 해시화**: SHA-256 암호화 적용
- **세션 기반 인증**: Streamlit 세션 상태 관리

### 2. 계정 보호 메커니즘
- **최대 로그인 시도**: 5회
- **계정 잠금 시간**: 5분 (300초)
- **세션 타임아웃**: 1시간 (3600초)
- **브루트포스 공격 방지**: 자동 계정 잠금

### 3. 접근 제어 정책
- **관리 페이지**: 인증 필요 (업로드, 삭제, 관리)
- **3D 뷰어**: 인증 불필요 (공유 링크로 접근)
- **세션 만료 자동 체크**: 실시간 세션 유효성 검증

## 🔧 사용 방법

### 기본 사용
1. 애플리케이션 접속: `http://localhost:8501`
2. 관리자 인증 화면에서 비밀번호 입력: `palbong211!`
3. 로그인 성공 후 관리 페이지 사용
4. 세션 유지 시간: 1시간 (자동 로그아웃)

### 비밀번호 변경 (권장)
```bash
# 방법 1: 환경변수 설정 (Linux/Mac)
export ADMIN_PASSWORD="your_secure_password_123!"
streamlit run app.py

# 방법 2: 환경변수 설정 (Windows)
set ADMIN_PASSWORD="your_secure_password_123!"
streamlit run app.py

# 방법 3: .env 파일 사용 (python-dotenv 필요)
echo "ADMIN_PASSWORD=your_secure_password_123!" > .env
streamlit run app.py

# 방법 4: auth.py 파일 직접 수정
# ADMIN_PASSWORD = os.getenv("ADMIN_PASSWORD", "새로운_비밀번호")
```

## 🛡️ 보안 강화 권장사항

### 1. 필수 보안 조치
- [ ] 기본 비밀번호 즉시 변경
- [ ] 강력한 비밀번호 사용 (8자 이상, 영문+숫자+특수문자)
- [ ] 정기적인 비밀번호 변경 (월 1회)

### 2. 운영 환경 보안
- [ ] HTTPS 사용 (SSL/TLS 인증서)
- [ ] 방화벽 설정
- [ ] 정기적인 시스템 업데이트
- [ ] 로그 모니터링

### 3. 추가 보안 (선택사항)
- [ ] Nginx 리버스 프록시
- [ ] HTTP Basic Auth 추가
- [ ] VPN 연결
- [ ] 백업 및 복구 계획

## 🚨 긴급 상황 대응

### 즉시 서비스 중단
```bash
# 프로세스 종료
pkill -f streamlit

# 포트 차단 (UFW 사용시)
sudo ufw deny 8504
```

### 계정 잠금 해제
- 5분 대기 또는 서버 재시작

### 비밀번호 분실
```bash
# 새 비밀번호로 재시작
export ADMIN_PASSWORD="new_password"
streamlit run app.py
```

## 📊 보안 상태 확인

### 로그인 화면 정보
- **남은 로그인 시도 횟수**: 실시간 표시
- **계정 잠금 상태**: 잠금 시 남은 시간 표시
- **보안 정보 확장 패널**: 상세 설정 확인 가능

### 로그인 후 보안 정보 (🛡️ 보안 정보 섹션)
- **현재 로그인 시간**: 로그인 시각 기록
- **세션 만료까지 남은 시간**: 실시간 카운트다운
- **보안 설정 상태**: 현재 적용된 보안 정책

## 🔑 auth.py 모듈 상세 기능

### 핵심 함수들
```python
# 비밀번호 해시화
hash_password(password) → SHA-256 해시값

# 계정 잠금 상태 확인
is_locked_out() → (잠금여부, 남은시간)

# 세션 만료 확인
is_session_expired() → bool

# 로그인 실패 기록
record_failed_attempt() → 시도 횟수 증가

# 로그인 성공 기록
record_successful_login() → 세션 초기화

# 메인 인증 함수
check_password() → bool (인증 성공/실패)

# 로그아웃
logout() → 세션 정리 및 리다이렉트

# 로그아웃 버튼 표시
show_logout_button() → UI 버튼 렌더링
```

### 세션 상태 변수
- `password_correct`: 인증 상태 (True/False)
- `login_attempts`: 로그인 시도 횟수
- `last_attempt_time`: 마지막 시도 시간
- `login_time`: 로그인 성공 시간

## ⚠️ 주의사항

### 보안 취약점 및 대응
1. **기본 비밀번호 노출**
   - 위험도: 🔴 높음
   - 대응: 즉시 변경 필수

2. **HTTP 평문 전송**
   - 위험도: 🟠 중간
   - 대응: HTTPS 프로토콜 사용

3. **세션 하이재킹**
   - 위험도: 🟡 낮음
   - 대응: 1시간 자동 만료 설정

4. **브루트포스 공격**
   - 위험도: 🟢 방어됨
   - 대응: 5회 실패 시 5분 잠금

### 보안 모범 사례
- ✅ 환경변수로 비밀번호 관리
- ✅ 정기적인 비밀번호 변경
- ✅ HTTPS 사용 권장
- ✅ 접근 로그 모니터링
- ✅ 세션 타임아웃 적절히 설정

## 🚀 향후 보안 개선 계획

### 단기 계획
- [ ] 비밀번호 복잡도 검증
- [ ] 로그인 이력 기록
- [ ] IP 기반 접근 제한

### 장기 계획
- [ ] 2단계 인증 (2FA)
- [ ] OAuth 2.0 통합
- [ ] 역할 기반 접근 제어 (RBAC)
- [ ] 감사 로그 시스템

---
💡 **보안 문의**: (주)에어바이블 개발팀
📧 **이메일**: airbible@naver.com
🔐 **버전**: v1.0.0 (2025.08)
